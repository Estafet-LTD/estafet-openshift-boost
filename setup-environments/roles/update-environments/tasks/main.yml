---
- include_role: 
    name : init
  when: openshift_connected is undefined or not openshift_connected

- include_role: 
    name: "{{ item.name }}"
  vars:
    project: "{{ item.project }}"
    params: "{{ item }}"
  with_items: "{{ environments.roles | default([]) }}"

- include_role: 
    name: environments-setup
  vars:
    env: "{{ item }}"     
  with_items: "{{ environments.stages }}"

- include_role: 
    name: cicd-environment-setup