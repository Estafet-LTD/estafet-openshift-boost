---
- name: Check that the {{ plug_in }}.tgz exists
  stat:
    path: "{{ path }}/{{ plug_in }}.tgz"
  register: stat_result

- name: "Extract {{ plug_in }}.tgz into {{ path }}/files"
  unarchive:
    src: "{{ path }}/{{ plug_in }}.tgz"
    dest: "{{ path }}"
  when: stat_result.stat.exists

- name: remove the plugin archive
  shell: "rm {{ path }}/{{ plug_in }}.tgz | true"

